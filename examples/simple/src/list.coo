APPLICATION
    CONSTRUCT parentNode
        SET p
            +VIEW Page CREATE

        DOM $parentNode APPEND
            +VIEW Page $p RENDER


MODEL Item
    PROPERTY title<String>

    CONSTRUCT title
        THIS SET title $title


COLLECTION List
    MODEL Item


VIEW Item
    PROPERTY model<MODEL Item>
    PROPERTY textNode<JS val (val instanceof Node)>

    CONSTRUCT m
        THIS SET model $m

        MODEL Item $m
            CHANGE "title" val
                DOM @textNode TEXT SET $val

            DESTROY
                THIS DESTROY

    RENDER
        +TEMPLATE Item APPLY
            PARAM title
                +MODEL Item @model GET title

            "text" node
                THIS SET textNode $node

            "remove" node
                DOM $node
                    CLICK
                        MODEL Item @model DESTROY


VIEW Page
    PROPERTY container<Node>
    PROPERTY input<Node>
    PROPERTY list<COLLECTION List>

    CONSTRUCT
        THIS SET list
            +COLLECTION List CREATE
                ADD m
                    THIS CALL addItem $m

    RENDER
        +TEMPLATE Page APPLY
            "container" node
                THIS SET container $node

            "input" node
                THIS SET input $node

            "add" node
                DOM $node
                    CLICK
                        COLLECTION List @list ADD [+DOM @input VALUE GET]
                        DOM @input VALUE SET ""

    METHOD addItem m
        DOM @container APPEND
            +VIEW Item [+VIEW Item CREATE $m] RENDER


TEMPLATE Page
    ORIGIN "conkitty:page"


TEMPLATE Item title
    ORIGIN "conkitty:item"
